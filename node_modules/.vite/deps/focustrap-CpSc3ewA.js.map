{"version":3,"file":"focustrap-CpSc3ewA.js","names":["o","r","isFocusableElement","getFirstFocusableElement","isNotEmpty","getLastFocusableElement","createFocusableElement","createElement"],"sources":["../../primevue/focustrap/style/index.mjs","../../primevue/focustrap/index.mjs"],"sourcesContent":["import BaseStyle from '@primevue/core/base/style';\n\nvar FocusTrapStyle = BaseStyle.extend({\n  name: 'focustrap-directive'\n});\n\nexport { FocusTrapStyle as default };\n//# sourceMappingURL=index.mjs.map\n","import { getLastFocusableElement, focus, getFirstFocusableElement, createElement, isFocusableElement } from '@primeuix/utils/dom';\nimport { isNotEmpty } from '@primeuix/utils/object';\nimport BaseDirective from '@primevue/core/basedirective';\nimport FocusTrapStyle from 'primevue/focustrap/style';\n\nvar BaseFocusTrap = BaseDirective.extend({\n  style: FocusTrapStyle\n});\n\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), true).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: true, configurable: true, writable: true }) : e[r] = t, e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nvar FocusTrap = BaseFocusTrap.extend('focustrap', {\n  mounted: function mounted(el, binding) {\n    var _ref = binding.value || {},\n      disabled = _ref.disabled;\n    if (!disabled) {\n      this.createHiddenFocusableElements(el, binding);\n      this.bind(el, binding);\n      this.autoElementFocus(el, binding);\n    }\n    el.setAttribute('data-pd-focustrap', true);\n    this.$el = el;\n  },\n  updated: function updated(el, binding) {\n    var _ref2 = binding.value || {},\n      disabled = _ref2.disabled;\n    disabled && this.unbind(el);\n  },\n  unmounted: function unmounted(el) {\n    this.unbind(el);\n  },\n  methods: {\n    getComputedSelector: function getComputedSelector(selector) {\n      return \":not(.p-hidden-focusable):not([data-p-hidden-focusable=\\\"true\\\"])\".concat(selector !== null && selector !== void 0 ? selector : '');\n    },\n    bind: function bind(el, binding) {\n      var _this = this;\n      var _ref3 = binding.value || {},\n        onFocusIn = _ref3.onFocusIn,\n        onFocusOut = _ref3.onFocusOut;\n      el.$_pfocustrap_mutationobserver = new MutationObserver(function (mutationList) {\n        mutationList.forEach(function (mutation) {\n          if (mutation.type === 'childList' && !el.contains(document.activeElement)) {\n            var _findNextFocusableElement = function findNextFocusableElement(_el) {\n              var focusableElement = isFocusableElement(_el) ? isFocusableElement(_el, _this.getComputedSelector(el.$_pfocustrap_focusableselector)) ? _el : getFirstFocusableElement(el, _this.getComputedSelector(el.$_pfocustrap_focusableselector)) : getFirstFocusableElement(_el);\n              return isNotEmpty(focusableElement) ? focusableElement : _el.nextSibling && _findNextFocusableElement(_el.nextSibling);\n            };\n            focus(_findNextFocusableElement(mutation.nextSibling));\n          }\n        });\n      });\n      el.$_pfocustrap_mutationobserver.disconnect();\n      el.$_pfocustrap_mutationobserver.observe(el, {\n        childList: true\n      });\n      el.$_pfocustrap_focusinlistener = function (event) {\n        return onFocusIn && onFocusIn(event);\n      };\n      el.$_pfocustrap_focusoutlistener = function (event) {\n        return onFocusOut && onFocusOut(event);\n      };\n      el.addEventListener('focusin', el.$_pfocustrap_focusinlistener);\n      el.addEventListener('focusout', el.$_pfocustrap_focusoutlistener);\n    },\n    unbind: function unbind(el) {\n      el.$_pfocustrap_mutationobserver && el.$_pfocustrap_mutationobserver.disconnect();\n      el.$_pfocustrap_focusinlistener && el.removeEventListener('focusin', el.$_pfocustrap_focusinlistener) && (el.$_pfocustrap_focusinlistener = null);\n      el.$_pfocustrap_focusoutlistener && el.removeEventListener('focusout', el.$_pfocustrap_focusoutlistener) && (el.$_pfocustrap_focusoutlistener = null);\n    },\n    autoFocus: function autoFocus(options) {\n      this.autoElementFocus(this.$el, {\n        value: _objectSpread(_objectSpread({}, options), {}, {\n          autoFocus: true\n        })\n      });\n    },\n    autoElementFocus: function autoElementFocus(el, binding) {\n      var _ref4 = binding.value || {},\n        _ref4$autoFocusSelect = _ref4.autoFocusSelector,\n        autoFocusSelector = _ref4$autoFocusSelect === void 0 ? '' : _ref4$autoFocusSelect,\n        _ref4$firstFocusableS = _ref4.firstFocusableSelector,\n        firstFocusableSelector = _ref4$firstFocusableS === void 0 ? '' : _ref4$firstFocusableS,\n        _ref4$autoFocus = _ref4.autoFocus,\n        autoFocus = _ref4$autoFocus === void 0 ? false : _ref4$autoFocus;\n      var focusableElement = getFirstFocusableElement(el, \"[autofocus]\".concat(this.getComputedSelector(autoFocusSelector)));\n      autoFocus && !focusableElement && (focusableElement = getFirstFocusableElement(el, this.getComputedSelector(firstFocusableSelector)));\n      focus(focusableElement);\n    },\n    onFirstHiddenElementFocus: function onFirstHiddenElementFocus(event) {\n      var _this$$el;\n      var currentTarget = event.currentTarget,\n        relatedTarget = event.relatedTarget;\n      var focusableElement = relatedTarget === currentTarget.$_pfocustrap_lasthiddenfocusableelement || !((_this$$el = this.$el) !== null && _this$$el !== void 0 && _this$$el.contains(relatedTarget)) ? getFirstFocusableElement(currentTarget.parentElement, this.getComputedSelector(currentTarget.$_pfocustrap_focusableselector)) : currentTarget.$_pfocustrap_lasthiddenfocusableelement;\n      focus(focusableElement);\n    },\n    onLastHiddenElementFocus: function onLastHiddenElementFocus(event) {\n      var _this$$el2;\n      var currentTarget = event.currentTarget,\n        relatedTarget = event.relatedTarget;\n      var focusableElement = relatedTarget === currentTarget.$_pfocustrap_firsthiddenfocusableelement || !((_this$$el2 = this.$el) !== null && _this$$el2 !== void 0 && _this$$el2.contains(relatedTarget)) ? getLastFocusableElement(currentTarget.parentElement, this.getComputedSelector(currentTarget.$_pfocustrap_focusableselector)) : currentTarget.$_pfocustrap_firsthiddenfocusableelement;\n      focus(focusableElement);\n    },\n    createHiddenFocusableElements: function createHiddenFocusableElements(el, binding) {\n      var _this2 = this;\n      var _ref5 = binding.value || {},\n        _ref5$tabIndex = _ref5.tabIndex,\n        tabIndex = _ref5$tabIndex === void 0 ? 0 : _ref5$tabIndex,\n        _ref5$firstFocusableS = _ref5.firstFocusableSelector,\n        firstFocusableSelector = _ref5$firstFocusableS === void 0 ? '' : _ref5$firstFocusableS,\n        _ref5$lastFocusableSe = _ref5.lastFocusableSelector,\n        lastFocusableSelector = _ref5$lastFocusableSe === void 0 ? '' : _ref5$lastFocusableSe;\n      var createFocusableElement = function createFocusableElement(onFocus) {\n        return createElement('span', {\n          \"class\": 'p-hidden-accessible p-hidden-focusable',\n          tabIndex: tabIndex,\n          role: 'presentation',\n          'aria-hidden': true,\n          'data-p-hidden-accessible': true,\n          'data-p-hidden-focusable': true,\n          onFocus: onFocus === null || onFocus === void 0 ? void 0 : onFocus.bind(_this2)\n        });\n      };\n      var firstFocusableElement = createFocusableElement(this.onFirstHiddenElementFocus);\n      var lastFocusableElement = createFocusableElement(this.onLastHiddenElementFocus);\n      firstFocusableElement.$_pfocustrap_lasthiddenfocusableelement = lastFocusableElement;\n      firstFocusableElement.$_pfocustrap_focusableselector = firstFocusableSelector;\n      firstFocusableElement.setAttribute('data-pc-section', 'firstfocusableelement');\n      lastFocusableElement.$_pfocustrap_firsthiddenfocusableelement = firstFocusableElement;\n      lastFocusableElement.$_pfocustrap_focusableselector = lastFocusableSelector;\n      lastFocusableElement.setAttribute('data-pc-section', 'lastfocusableelement');\n      el.prepend(firstFocusableElement);\n      el.append(lastFocusableElement);\n    }\n  }\n});\n\nexport { FocusTrap as default };\n//# sourceMappingURL=index.mjs.map\n"],"mappings":"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"}